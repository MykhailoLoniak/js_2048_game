var t=document.querySelector(".message-start"),e=document.querySelector(".message-win"),n=document.querySelector(".message-lose"),o=document.querySelector(".game-score"),l=document.querySelector(".start"),r=document.querySelector(".game"),c=document.createElement("table");c.classList.add("game-field");for(var a=0,i=0;i<4;i++){var d=document.createElement("tr");d.classList.add("field-row");for(var f=0;f<4;f++){var s=document.createElement("td");s.classList.add("field-cell"),s.textContent=null,d.appendChild(s)}c.appendChild(d)}r.appendChild(c);var u=Array.from(document.querySelectorAll(".field-cell")),C=function(){var t=u.filter(function(t){return!t.textContent}),e=t.length;t[Math.floor(Math.random()*e)].textContent=.9>Math.random()?2:4,!function(){for(var t=0;t<u.length;t++)if(!u[t].textContent)return!0;for(var e=0;e<u.length-v;e++)if(u[e].textContent===u[e+v].textContent&&""!==u[e].textContent)return!0;for(var n=v;n<u.length;n++)if(u[n].textContent===u[n-v].textContent&&""!==u[n].textContent)return!0;for(var o=0;o<u.length;o++)if(o%v!=0&&u[o].textContent===u[o-1].textContent&&""!==u[o].textContent)return!0;return!1}()&&(n.classList.remove("hidden"),S(),u.map(function(t){return t.textContent=""}),u[4].textContent="G",u[5].textContent="A",u[6].textContent="M",u[7].textContent="E",u[8].textContent="O",u[9].textContent="V",u[10].textContent="E",u[11].textContent="R"),A()},x=function(){a=0,o.textContent=a,l.textContent="Reset",l.classList.add("restart"),n.classList.add("hidden"),e.classList.add("hidden"),t.classList.add("hidden"),document.addEventListener("keydown",m),C(),C()};function m(t){"ArrowUp"===t.key?(h(),p(),h(),C()):"ArrowDown"===t.key?(L(),p(),L(),C()):"ArrowLeft"===t.key?(g(),E(),g(),C()):"ArrowRight"===t.key&&(y(),E(),y(),C())}x(),l.addEventListener("click",function(){u.forEach(function(t){return t.textContent=null}),x()});var v=4;function h(){for(var t=0;t<4;t++)!function(t){var e=[t,t+v,t+2*v,t+3*v],n=[e.map(function(t){return u[t].textContent})][0].filter(function(t){return t}),o=Array(4-n.length).fill(0),l=n.concat(o);e.forEach(function(t,e){u[t].textContent=0===l[e]?"":l[e]})}(t)}function L(){for(var t=0;t<4;t++)!function(t){var e=[t,t+v,t+2*v,t+3*v],n=e.map(function(t){return u[t].textContent}).filter(function(t){return t}),o=Array(4-n.length).fill(0).concat(n);e.forEach(function(t,e){u[t].textContent=0===o[e]?"":o[e]})}(t)}function g(){for(var t=0;t<16;t++)!function(t){if(t%4==0){var e=[t,t+1,t+2,t+3],n=e.map(function(t){return parseInt(u[t].textContent)}).filter(function(t){return t}),o=Array(4-n.length).fill(0),l=n.concat(o);e.forEach(function(t,e){u[t].textContent=0===l[e]?"":l[e]})}}(t)}function y(){for(var t=0;t<16;t++)!function(t){if(t%4==0){var e=[t,t+1,t+2,t+3],n=e.map(function(t){return parseInt(u[t].textContent)}).filter(function(t){return t}),o=Array(4-n.length).fill(0).concat(n);e.forEach(function(t,e){u[t].textContent=0===o[e]?"":o[e]})}}(t)}function p(){for(var t=0;t<12;t++)if(u[t].textContent===u[t+v].textContent&&""!==u[t].textContent){var e=2*parseInt(u[t].textContent);u[t].textContent=e,u[t+v].textContent="",a+=e,o.textContent=a}w()}function E(){for(var t=0;t<15;t++)if(u[t].textContent===u[t+1].textContent&&""!==u[t].textContent){var e=2*parseInt(u[t].textContent);u[t].textContent=e,u[t+1].textContent="",a+=e,o.textContent=a}w()}function A(){for(var t=0;t<u.length;t++)u[t].classList.remove("field-cell--2","field-cell--4","field-cell--8","field-cell--16","field-cell--32","field-cell--64","field-cell--128","field-cell--256","field-cell--512","field-cell--1024","field-cell--2048"),u[t].textContent?2==u[t].textContent?u[t].classList.add("field-cell--2"):4==parseInt(u[t].textContent)?u[t].classList.add("field-cell--4"):8==u[t].textContent?u[t].classList.add("field-cell--8"):16==u[t].textContent?u[t].classList.add("field-cell--16"):32==u[t].textContent?u[t].classList.add("field-cell--32"):64==u[t].textContent?u[t].classList.add("field-cell--64"):128==u[t].textContent?u[t].classList.add("field-cell--128"):256==u[t].textContent?u[t].classList.add("field-cell--256"):512==u[t].textContent?u[t].classList.add("field-cell--512"):1024==u[t].textContent?u[t].classList.add("field-cell--512"):2048==u[t].textContent&&u[t].classList.add("field-cell--2048"):u[t].classList.add("field-cell")}function w(){for(var t=0;t<u.length;t++)2048==u[t].textContent&&(e.classList.remove("hidden"),S())}function S(){t.classList.remove("hidden"),l.textContent="Start",l.classList.remove("restart"),document.removeEventListener("keydown",m)}A();
//# sourceMappingURL=index.c01c8f52.js.map

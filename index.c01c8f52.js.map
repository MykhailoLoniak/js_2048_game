{"mappings":"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","sources":["<anon>","src/scripts/main.js"],"sourcesContent":["\"use strict\";\nvar messageStart = document.querySelector(\".message-start\");\nvar messageWin = document.querySelector(\".message-win\");\nvar messageLose = document.querySelector(\".message-lose\");\nvar gameScore = document.querySelector(\".game-score\");\nvar start = document.querySelector(\".start\");\nvar game = document.querySelector(\".game\");\nvar table = document.createElement(\"table\");\ntable.classList.add(\"game-field\");\nvar rows = 4;\nvar cols = 4;\nvar score = 0;\nfor(var i = 0; i < rows; i++){\n    var row = document.createElement(\"tr\");\n    row.classList.add(\"field-row\");\n    for(var j = 0; j < cols; j++){\n        var cell = document.createElement(\"td\");\n        cell.classList.add(\"field-cell\");\n        cell.textContent = null;\n        row.appendChild(cell);\n    }\n    table.appendChild(row);\n}\ngame.appendChild(table);\nvar cells = document.querySelectorAll(\".field-cell\");\nvar cellsArray = Array.from(cells);\nvar generate = function() {\n    var emptyCells = cellsArray.filter(function(e) {\n        return !e.textContent;\n    });\n    var numEmptyCells = emptyCells.length;\n    var randomIndex = Math.floor(Math.random() * numEmptyCells);\n    var randomEmptyCell = emptyCells[randomIndex];\n    var randomNumber = Math.random() < 0.9 ? 2 : 4;\n    randomEmptyCell.textContent = randomNumber;\n    if (!checkAvailableMoves()) gameOver();\n    addColours();\n};\nvar keyboardHandler = handleKeyPress;\nvar starting = function() {\n    score = 0;\n    gameScore.textContent = score;\n    start.textContent = \"Reset\";\n    start.classList.add(\"restart\");\n    messageLose.classList.add(\"hidden\");\n    messageWin.classList.add(\"hidden\");\n    messageStart.classList.add(\"hidden\");\n    document.addEventListener(\"keydown\", keyboardHandler);\n    generate();\n    generate();\n};\nfunction handleKeyPress(event) {\n    if (event.key === \"ArrowUp\") keyUp();\n    else if (event.key === \"ArrowDown\") keyDown();\n    else if (event.key === \"ArrowLeft\") keyLeft();\n    else if (event.key === \"ArrowRight\") keyRight();\n}\nstarting();\nstart.addEventListener(\"click\", function() {\n    cellsArray.forEach(function(e) {\n        return e.textContent = null;\n    });\n    starting();\n});\nfunction checkAvailableMoves() {\n    for(var i = 0; i < cellsArray.length; i++){\n        if (!cellsArray[i].textContent) return true;\n    }\n    for(var i1 = 0; i1 < cellsArray.length - width; i1++){\n        if (cellsArray[i1].textContent === cellsArray[i1 + width].textContent && cellsArray[i1].textContent !== \"\") return true;\n    }\n    for(var i2 = width; i2 < cellsArray.length; i2++){\n        if (cellsArray[i2].textContent === cellsArray[i2 - width].textContent && cellsArray[i2].textContent !== \"\") return true;\n    }\n    for(var i3 = 0; i3 < cellsArray.length; i3++)if (i3 % width !== 0) {\n        if (cellsArray[i3].textContent === cellsArray[i3 - 1].textContent && cellsArray[i3].textContent !== \"\") return true;\n    }\n    return false;\n}\nvar width = 4;\nfunction moveUp() {\n    var _loop = function(i) {\n        var index = [\n            i,\n            i + width,\n            i + width * 2,\n            i + width * 3\n        ];\n        var column = [\n            index.map(function(e) {\n                return cellsArray[e].textContent;\n            })\n        ];\n        var filteredColumn = column[0].filter(function(num) {\n            return num;\n        });\n        var missing = 4 - filteredColumn.length;\n        var zeros = Array(missing).fill(0);\n        var newColumn = filteredColumn.concat(zeros);\n        index.forEach(function(e, i) {\n            cellsArray[e].textContent = newColumn[i] === 0 ? \"\" : newColumn[i];\n        });\n    };\n    for(var i = 0; i < 4; i++)_loop(i);\n}\nfunction moveDown() {\n    var _loop = function(i) {\n        var index = [\n            i,\n            i + width,\n            i + width * 2,\n            i + width * 3\n        ];\n        var column = index.map(function(e) {\n            return cellsArray[e].textContent;\n        });\n        var filteredColumn = column.filter(function(num) {\n            return num;\n        });\n        var missing = 4 - filteredColumn.length;\n        var zeros = Array(missing).fill(0);\n        var newColumn = zeros.concat(filteredColumn);\n        index.forEach(function(e, index) {\n            cellsArray[e].textContent = newColumn[index] === 0 ? \"\" : newColumn[index];\n        });\n    };\n    for(var i = 0; i < 4; i++)_loop(i);\n}\nfunction moveLeft() {\n    var _loop = function(i) {\n        if (i % 4 === 0) {\n            var index = [\n                i,\n                i + 1,\n                i + 2,\n                i + 3\n            ];\n            var row = index.map(function(e) {\n                return parseInt(cellsArray[e].textContent);\n            });\n            var filteredRow = row.filter(function(num) {\n                return num;\n            });\n            var missing = 4 - filteredRow.length;\n            var zeros = Array(missing).fill(0);\n            var newRow = filteredRow.concat(zeros);\n            index.forEach(function(e, index) {\n                cellsArray[e].textContent = newRow[index] === 0 ? \"\" : newRow[index];\n            });\n        }\n    };\n    for(var i = 0; i < 16; i++)_loop(i);\n}\nfunction moveRight() {\n    var _loop = function(i) {\n        if (i % 4 === 0) {\n            var index = [\n                i,\n                i + 1,\n                i + 2,\n                i + 3\n            ];\n            var row = index.map(function(e) {\n                return parseInt(cellsArray[e].textContent);\n            });\n            var filteredRow = row.filter(function(num) {\n                return num;\n            });\n            var missing = 4 - filteredRow.length;\n            var zeros = Array(missing).fill(0);\n            var newRow = zeros.concat(filteredRow);\n            index.forEach(function(e, index) {\n                cellsArray[e].textContent = newRow[index] === 0 ? \"\" : newRow[index];\n            });\n        }\n    };\n    for(var i = 0; i < 16; i++)_loop(i);\n}\nfunction keyUp() {\n    moveUp();\n    combineColumn();\n    moveUp();\n    generate();\n}\nfunction keyDown() {\n    moveDown();\n    combineColumn();\n    moveDown();\n    generate();\n}\nfunction keyLeft() {\n    moveLeft();\n    combineRow();\n    moveLeft();\n    generate();\n}\nfunction keyRight() {\n    moveRight();\n    combineRow();\n    moveRight();\n    generate();\n}\nfunction combineColumn() {\n    for(var i = 0; i < 12; i++)if (cellsArray[i].textContent === cellsArray[i + width].textContent && cellsArray[i].textContent !== \"\") {\n        var combinedTotal = parseInt(cellsArray[i].textContent) * 2;\n        cellsArray[i].textContent = combinedTotal;\n        cellsArray[i + width].textContent = \"\";\n        score += combinedTotal;\n        gameScore.textContent = score;\n    }\n    checkForWin();\n}\nfunction combineRow() {\n    for(var i = 0; i < 15; i++)if (cellsArray[i].textContent === cellsArray[i + 1].textContent && cellsArray[i].textContent !== \"\") {\n        var combinedTotal = parseInt(cellsArray[i].textContent) * 2;\n        cellsArray[i].textContent = combinedTotal;\n        cellsArray[i + 1].textContent = \"\";\n        score += combinedTotal;\n        gameScore.textContent = score;\n    }\n    checkForWin();\n}\nfunction addColours() {\n    for(var i = 0; i < cellsArray.length; i++){\n        cellsArray[i].classList.remove(\"field-cell--2\", \"field-cell--4\", \"field-cell--8\", \"field-cell--16\", \"field-cell--32\", \"field-cell--64\", \"field-cell--128\", \"field-cell--256\", \"field-cell--512\", \"field-cell--1024\", \"field-cell--2048\");\n        if (!cellsArray[i].textContent) cellsArray[i].classList.add(\"field-cell\");\n        else if (cellsArray[i].textContent == 2) cellsArray[i].classList.add(\"field-cell--2\");\n        else if (parseInt(cellsArray[i].textContent) == 4) cellsArray[i].classList.add(\"field-cell--4\");\n        else if (cellsArray[i].textContent == 8) cellsArray[i].classList.add(\"field-cell--8\");\n        else if (cellsArray[i].textContent == 16) cellsArray[i].classList.add(\"field-cell--16\");\n        else if (cellsArray[i].textContent == 32) cellsArray[i].classList.add(\"field-cell--32\");\n        else if (cellsArray[i].textContent == 64) cellsArray[i].classList.add(\"field-cell--64\");\n        else if (cellsArray[i].textContent == 128) cellsArray[i].classList.add(\"field-cell--128\");\n        else if (cellsArray[i].textContent == 256) cellsArray[i].classList.add(\"field-cell--256\");\n        else if (cellsArray[i].textContent == 512) cellsArray[i].classList.add(\"field-cell--512\");\n        else if (cellsArray[i].textContent == 1024) cellsArray[i].classList.add(\"field-cell--512\");\n        else if (cellsArray[i].textContent == 2048) cellsArray[i].classList.add(\"field-cell--2048\");\n    }\n}\naddColours();\nfunction checkForWin() {\n    for(var i = 0; i < cellsArray.length; i++)if (cellsArray[i].textContent == 2048) {\n        messageWin.classList.remove(\"hidden\");\n        gameStart();\n    }\n// document.removeEventListener('keydown', 'keyboard');\n}\nfunction gameOver() {\n    messageLose.classList.remove(\"hidden\");\n    gameStart();\n    cellsArray.map(function(e) {\n        return e.textContent = \"\";\n    });\n    cellsArray[4].textContent = \"G\";\n    cellsArray[5].textContent = \"A\";\n    cellsArray[6].textContent = \"M\";\n    cellsArray[7].textContent = \"E\";\n    cellsArray[8].textContent = \"O\";\n    cellsArray[9].textContent = \"V\";\n    cellsArray[10].textContent = \"E\";\n    cellsArray[11].textContent = \"R\";\n}\nfunction gameStart() {\n    messageStart.classList.remove(\"hidden\");\n    start.textContent = \"Start\";\n    start.classList.remove(\"restart\");\n    document.removeEventListener(\"keydown\", keyboardHandler);\n}\n\n//# sourceMappingURL=index.c01c8f52.js.map\n","'use strict';\n\nconst messageStart = document.querySelector('.message-start');\nconst messageWin = document.querySelector('.message-win');\nconst messageLose = document.querySelector('.message-lose');\nconst gameScore = document.querySelector('.game-score');\nconst start = document.querySelector('.start');\nconst game = document.querySelector('.game');\n\nconst table = document.createElement('table');\n\ntable.classList.add('game-field');\n\nconst rows = 4;\nconst cols = 4;\nlet score = 0;\n\nfor (let i = 0; i < rows; i++) {\n  const row = document.createElement('tr');\n\n  row.classList.add('field-row');\n\n  for (let j = 0; j < cols; j++) {\n    const cell = document.createElement('td');\n\n    cell.classList.add('field-cell');\n    cell.textContent = null;\n    row.appendChild(cell);\n  }\n\n  table.appendChild(row);\n}\n\ngame.appendChild(table);\n\nconst cells = document.querySelectorAll('.field-cell');\nconst cellsArray = Array.from(cells);\n\nconst generate = () => {\n  const emptyCells = cellsArray.filter((e) => !e.textContent);\n  const numEmptyCells = emptyCells.length;\n  const randomIndex = Math.floor(Math.random() * numEmptyCells);\n  const randomEmptyCell = emptyCells[randomIndex];\n  const randomNumber = Math.random() < 0.9 ? 2 : 4;\n\n  randomEmptyCell.textContent = randomNumber;\n\n  if (!checkAvailableMoves()) {\n    gameOver();\n  }\n\n  addColours();\n};\n\nconst keyboardHandler = handleKeyPress;\n\nconst starting = () => {\n  score = 0;\n  gameScore.textContent = score;\n  start.textContent = 'Reset';\n  start.classList.add('restart');\n  messageLose.classList.add('hidden');\n  messageWin.classList.add('hidden');\n  messageStart.classList.add('hidden');\n  document.addEventListener('keydown', keyboardHandler);\n\n  generate();\n  generate();\n};\n\nfunction handleKeyPress(event) {\n  if (event.key === 'ArrowUp') {\n    keyUp();\n  } else if (event.key === 'ArrowDown') {\n    keyDown();\n  } else if (event.key === 'ArrowLeft') {\n    keyLeft();\n  } else if (event.key === 'ArrowRight') {\n    keyRight();\n  }\n}\n\nstarting();\n\nstart.addEventListener('click', () => {\n  cellsArray.forEach((e) => (e.textContent = null));\n  starting();\n});\n\nfunction checkAvailableMoves() {\n  for (let i = 0; i < cellsArray.length; i++) {\n    if (!cellsArray[i].textContent) {\n      return true;\n    }\n  }\n\n  for (let i = 0; i < cellsArray.length - width; i++) {\n    if (\n      cellsArray[i].textContent === cellsArray[i + width].textContent &&\n      cellsArray[i].textContent !== ''\n    ) {\n      return true;\n    }\n  }\n\n  for (let i = width; i < cellsArray.length; i++) {\n    if (\n      cellsArray[i].textContent === cellsArray[i - width].textContent &&\n      cellsArray[i].textContent !== ''\n    ) {\n      return true;\n    }\n  }\n\n  for (let i = 0; i < cellsArray.length; i++) {\n    if (i % width !== 0) {\n      if (\n        cellsArray[i].textContent === cellsArray[i - 1].textContent &&\n        cellsArray[i].textContent !== ''\n      ) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nconst width = 4;\n\nfunction moveUp() {\n  for (let i = 0; i < 4; i++) {\n    const index = [i, i + width, i + width * 2, i + width * 3];\n    const column = [index.map((e) => cellsArray[e].textContent)];\n    const filteredColumn = column[0].filter((num) => num);\n    const missing = 4 - filteredColumn.length;\n    const zeros = Array(missing).fill(0);\n    const newColumn = filteredColumn.concat(zeros);\n\n    index.forEach((e, i) => {\n      cellsArray[e].textContent = newColumn[i] === 0 ? '' : newColumn[i];\n    });\n  }\n}\n\nfunction moveDown() {\n  for (let i = 0; i < 4; i++) {\n    const index = [i, i + width, i + width * 2, i + width * 3];\n    const column = index.map((e) => cellsArray[e].textContent);\n    const filteredColumn = column.filter((num) => num);\n    const missing = 4 - filteredColumn.length;\n    const zeros = Array(missing).fill(0);\n    const newColumn = zeros.concat(filteredColumn);\n\n    index.forEach((e, index) => {\n      cellsArray[e].textContent =\n        newColumn[index] === 0 ? '' : newColumn[index];\n    });\n  }\n}\n\nfunction moveLeft() {\n  for (let i = 0; i < 16; i++) {\n    if (i % 4 === 0) {\n      const index = [i, i + 1, i + 2, i + 3];\n      const row = index.map((e) => parseInt(cellsArray[e].textContent));\n      const filteredRow = row.filter((num) => num);\n      const missing = 4 - filteredRow.length;\n      const zeros = Array(missing).fill(0);\n      const newRow = filteredRow.concat(zeros);\n\n      index.forEach((e, index) => {\n        cellsArray[e].textContent = newRow[index] === 0 ? '' : newRow[index];\n      });\n    }\n  }\n}\n\nfunction moveRight() {\n  for (let i = 0; i < 16; i++) {\n    if (i % 4 === 0) {\n      const index = [i, i + 1, i + 2, i + 3];\n      const row = index.map((e) => parseInt(cellsArray[e].textContent));\n      const filteredRow = row.filter((num) => num);\n      const missing = 4 - filteredRow.length;\n      const zeros = Array(missing).fill(0);\n      const newRow = zeros.concat(filteredRow);\n\n      index.forEach((e, index) => {\n        cellsArray[e].textContent = newRow[index] === 0 ? '' : newRow[index];\n      });\n    }\n  }\n}\n\nfunction keyUp() {\n  moveUp();\n  combineColumn();\n  moveUp();\n  generate();\n}\n\nfunction keyDown() {\n  moveDown();\n  combineColumn();\n  moveDown();\n  generate();\n}\n\nfunction keyLeft() {\n  moveLeft();\n  combineRow();\n  moveLeft();\n  generate();\n}\n\nfunction keyRight() {\n  moveRight();\n  combineRow();\n  moveRight();\n  generate();\n}\n\nfunction combineColumn() {\n  for (let i = 0; i < 12; i++) {\n    if (\n      cellsArray[i].textContent === cellsArray[i + width].textContent &&\n      cellsArray[i].textContent !== ''\n    ) {\n      const combinedTotal = parseInt(cellsArray[i].textContent) * 2;\n\n      cellsArray[i].textContent = combinedTotal;\n      cellsArray[i + width].textContent = '';\n      score += combinedTotal;\n      gameScore.textContent = score;\n    }\n  }\n  checkForWin();\n}\n\nfunction combineRow() {\n  for (let i = 0; i < 15; i++) {\n    if (\n      cellsArray[i].textContent === cellsArray[i + 1].textContent &&\n      cellsArray[i].textContent !== ''\n    ) {\n      const combinedTotal = parseInt(cellsArray[i].textContent) * 2;\n\n      cellsArray[i].textContent = combinedTotal;\n      cellsArray[i + 1].textContent = '';\n      score += combinedTotal;\n      gameScore.textContent = score;\n    }\n  }\n  checkForWin();\n}\n\nfunction addColours() {\n  for (let i = 0; i < cellsArray.length; i++) {\n    cellsArray[i].classList.remove(\n      'field-cell--2',\n      'field-cell--4',\n      'field-cell--8',\n      'field-cell--16',\n      'field-cell--32',\n      'field-cell--64',\n      'field-cell--128',\n      'field-cell--256',\n      'field-cell--512',\n      'field-cell--1024',\n      'field-cell--2048',\n    );\n\n    if (!cellsArray[i].textContent) {\n      cellsArray[i].classList.add('field-cell');\n    } else if (cellsArray[i].textContent == 2) {\n      cellsArray[i].classList.add('field-cell--2');\n    } else if (parseInt(cellsArray[i].textContent) == 4) {\n      cellsArray[i].classList.add('field-cell--4');\n    } else if (cellsArray[i].textContent == 8) {\n      cellsArray[i].classList.add('field-cell--8');\n    } else if (cellsArray[i].textContent == 16) {\n      cellsArray[i].classList.add('field-cell--16');\n    } else if (cellsArray[i].textContent == 32) {\n      cellsArray[i].classList.add('field-cell--32');\n    } else if (cellsArray[i].textContent == 64) {\n      cellsArray[i].classList.add('field-cell--64');\n    } else if (cellsArray[i].textContent == 128) {\n      cellsArray[i].classList.add('field-cell--128');\n    } else if (cellsArray[i].textContent == 256) {\n      cellsArray[i].classList.add('field-cell--256');\n    } else if (cellsArray[i].textContent == 512) {\n      cellsArray[i].classList.add('field-cell--512');\n    } else if (cellsArray[i].textContent == 1024) {\n      cellsArray[i].classList.add('field-cell--512');\n    } else if (cellsArray[i].textContent == 2048) {\n      cellsArray[i].classList.add('field-cell--2048');\n    }\n  }\n}\naddColours();\n\nfunction checkForWin() {\n  for (let i = 0; i < cellsArray.length; i++) {\n    if (cellsArray[i].textContent == 2048) {\n      messageWin.classList.remove('hidden');\n      gameStart();\n    }\n  }\n  // document.removeEventListener('keydown', 'keyboard');\n}\n\nfunction gameOver() {\n  messageLose.classList.remove('hidden');\n  gameStart();\n  cellsArray.map((e) => (e.textContent = ''));\n\n  cellsArray[4].textContent = 'G';\n  cellsArray[5].textContent = 'A';\n  cellsArray[6].textContent = 'M';\n  cellsArray[7].textContent = 'E';\n  cellsArray[8].textContent = 'O';\n  cellsArray[9].textContent = 'V';\n  cellsArray[10].textContent = 'E';\n  cellsArray[11].textContent = 'R';\n}\n\nfunction gameStart() {\n  messageStart.classList.remove('hidden');\n  start.textContent = 'Start';\n  start.classList.remove('restart');\n  document.removeEventListener('keydown', keyboardHandler);\n}\n"],"names":["messageStart","document","querySelector","messageWin","messageLose","gameScore","start","game","table","createElement","classList","add","score","i","row","j","cell","textContent","appendChild","cellsArray","Array","from","querySelectorAll","generate","emptyCells","filter","e","numEmptyCells","length","randomEmptyCell","Math","floor","random","checkAvailableMoves","i1","width","i2","i3","remove","gameStart","map","addColours","starting","addEventListener","handleKeyPress","event","key","moveUp","combineColumn","moveDown","moveLeft","combineRow","moveRight","forEach","_loop","index","filteredColumn","column","num","zeros","fill","newColumn","concat","filteredRow","parseInt","newRow","combinedTotal","checkForWin","removeEventListener"],"version":3,"file":"index.c01c8f52.js.map"}